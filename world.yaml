my_setting:
- &time_test 21600             # æµ‹è¯•èŠ‚ç‚¹å»¶è¿Ÿçš„é—´éš”ï¼ˆç§’ï¼‰ï¼ˆè‡ªåŠ¨åˆ‡æ¢èŠ‚ç‚¹çš„æ£€æµ‹é—´éš”ï¼‰
- &time_update 18000        # èŠ‚ç‚¹è®¢é˜…æ›´æ–°çš„é—´éš”ï¼ˆç§’ï¼‰ï¼ˆ24hæ›´æ–°ä¸€æ¬¡ï¼‰
- &time_update_rule 18000  # åˆ†æµè§„åˆ™æ›´æ–°çš„é—´éš”ï¼ˆç§’ï¼‰ï¼ˆ7å¤©æ›´æ–°ä¸€æ¬¡ï¼‰
- &test_url "http://www.apple.com/generate_204"  # å»¶è¿Ÿæµ‹è¯•é“¾æ¥ http://www.gstatic.com/generate_204 æˆ– https://cp.cloudflare.com
###############################################################################

#################### ç«¯å£ | æ¨¡å¼ | å¤–éƒ¨æ§åˆ¶ç«¯å£ ############################
mixed-port: 7891  # httpä»£ç† + socksä»£ç†
allow-lan: true
mode: rule
log-level: info
external-controller: 127.0.0.1:9090  # ç½‘é¡µç‰ˆæ§åˆ¶ï¼š[clash.razord.top] æˆ– [yacd.haishan.me] é»˜è®¤å¯†ç ä¸ºç©º

#################### DNS | tap | ç»•è¿‡fake-ipçš„åŸŸå ############################
dns:
  enable: true
  ipv6: false
  #listen: 0.0.0.0:53       # å¼€å¯tapï¼š0.0.0.0:53 å…³é—­tapï¼š127.0.0.1:53
  enhanced-mode: fake-ip    # fake-ip æˆ– redir-host
  nameserver:
  - 119.29.29.29            # è…¾è®¯ DNS
  - 223.6.6.6               # é˜¿é‡Œ DNS
  - 114.114.114.114
  - tls://dns.rubyfish.cn:853
  - https://dns.adguard.com/dns-query
  fallback:
  - 8.8.4.4
  - 1.0.0.1
  - tls://dns.rubyfish.cn:853
  - tls://1.0.0.1:853
  - tls://dns.google:853
  - https://1.1.1.1/dns-query
  use-hosts: true
  fake-ip-filter:
  - '*.lan'
  - 'localhost.ptlogin2.qq.com'
  - '+.xboxlive.com'
  - '+.stun.playstation.net'
  - '+.srv.nintendo.net'
  - 'xbox.*.microsoft.com'
  - 'dns.msftncsi.com'  # å¾®è½¯å•†åº—
  - 'www.msftncsi.com'
  - 'www.msftconnecttest.com'  # Windowsæµ‹è¯•ç½‘ç»œæ˜¯å¦é€šç•…
  - stun.*.*.*
  - stun.*.*
  - music.163.com
  - "*.music.163.com"
  - "*.126.net"
  - musicapi.taihe.com
  - music.taihe.com
  - songsearch.kugou.com
  - trackercdn.kugou.com
  - "*.kuwo.cn"
  - api-jooxtt.sanook.com
  - api.joox.com
  - joox.com
  - y.qq.com
  - "*.y.qq.com"
  - streamoc.music.tc.qq.com
  - mobileoc.music.tc.qq.com
  - isure.stream.qqmusic.qq.com
  - dl.stream.qqmusic.qq.com
  - aqqmusic.tc.qq.com
  - amobile.music.tc.qq.com
  - "*.xiami.com"
  - "*.music.migu.cn"
  - music.migu.cn
  - "*.msftconnecttest.com"
  - "*.msftncsi.com"
  - localhost.ptlogin2.qq.com
  - "*.*.*.srv.nintendo.net"
  - "*.*.stun.playstation.net"
  - xbox.*.*.microsoft.com
  - "*.ipv6.microsoft.com"
  - "*.*.xboxlive.com"
  - speedtest.cros.wr.pvp.net
  fallback-filter:
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'
      - '+.instagram.com'
      - '+.twitter.com'
      - '+.bbc.com'
      - '+.wikipedia.org'
      - '+.twitch.tv'
      - '+.pornhub.com'
      - '+.amazon.com'
##################### æœºåœºè®¢é˜… ï¼ˆå¯æ·»åŠ è‹¥å¹²ä¸åŒçš„æœºåœºï¼‰#######################
####################### è‹¥æŸäº›æœºåœºæœªæä¾› node list ############################
################ ä½¿ç”¨è½¬æ¢å™¨ https://sub.dler.io è½¬æ¢ä¸º node list ##############
proxy-providers:
  DlerCloud:
    type: http
    path: ./nodes/DlerCloud.list
    url:
    interval: *time_update  # è®¢é˜…æ›´æ–°é—´éš”ï¼ˆç§’ï¼‰
    health-check:
      enable: false
      url: *test_url
      interval: *time_test  # æµ‹è¯•é—´éš”
  Nexitally:
    type: http
    path: ./nodes/Nexitally.list
    url:
    interval: *time_update
    health-check:
      enable: false
      url: *test_url
      interval: *time_test
  Other-nodes:
    type: http
    path: ./nodes/Other-nodes.list
    url: 
    interval: *time_update
    health-check:
      enable: false
      url: *test_url
      interval: *time_test
  Game:
    type: http
    path: ./nodes/Game.list
    url:
    interval: *time_update
    health-check:
      enable: false
      url: *test_url
      interval: *time_test
################################### ç­–ç•¥ç»„ #################################### 
proxy-groups:
- name: PROXY
  type: select
  proxies:
  - ğŸ›¸ Nexitally
  - ğŸš‘ DlerCloud
  - ğŸ›´ Other-nodes
  - ğŸ•¹ï¸ Game
- name: "GlobalTV"
  type: select
  proxies:
  - PROXY
  - Media-Nodes
  - ğŸ›¸ Nexitally
  - ğŸš‘ DlerCloud
  - ğŸ›´ Other-nodes
- name: "AsianTV"
  type: select
  proxies:
  - DIRECT
  - PROXY
  - ğŸ›¸ Nexitally
  - ğŸš‘ DlerCloud
  - ğŸ›´ Other-nodes
- name: "ğŸ›¸ Nexitally"
  type: select
  use:
  - Nexitally
- name: "ğŸš‘ DlerCloud"
  type: select
  use:
  - DlerCloud
- name: "ğŸ›´ Other-nodes"
  type: select
  use:
  - Other-nodes
- name: "ğŸ•¹ï¸ Game"
  type: select
  disable-udp: false
  use:
  - Game
- name: "Media-Nodes"
  type: select
  use:
  - Nexitally
  - DlerCloud
- name: "Final"  # æ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•è§„åˆ™æ—¶ï¼Œè¯¥èµ°å‘ä½•å¤„ï¼Ÿ
  type: select
  proxies:
  - PROXY
  - DIRECT
- name: ğŸŒ Speedtest # æ‰€æœ‰ç­–ç•¥ç»„æ¦‚è§ˆ (speedtestå’Œ IPæŸ¥è¯¢ç½‘ç«™)
  type: select
  proxies:
  - PROXY            # çœŸæ­£çš„ä»£ç†èŠ‚ç‚¹ï¼ˆé»˜è®¤ä»£ç†ä¼šèµ°çš„èŠ‚ç‚¹ï¼‰
  - DIRECT           # ç›´è¿ï¼ˆçœ‹çœ‹æœ¬åœ°ç½‘ç»œæ˜¯å¦é€šç•…ï¼‰
  - ğŸ›¸ Nexitally          # AIA + IEPLèŠ‚ç‚¹
  - ğŸš‘ DlerCloud           # BGPèŠ‚ç‚¹
  - ğŸ›´ Other-nodes   # å…¶ä»–èŠ‚ç‚¹
  - ğŸ•¹ï¸ Game          # æ¸¸æˆèŠ‚ç‚¹
  - GlobalTV         # å›½å¤–æµåª’ä½“ï¼ˆNetflix+YouTube+Hulu+HBO+BBC+Fox+Disney+Apple TV+AbemaTV+TikTok+Twitch+Pornhub+Spotify+YouTubeMusicç­‰ï¼‰
  - AsianTV          # äºšæ´²æµåª’ä½“ï¼ˆçˆ±å¥‡è‰º+Bilibili+èŠ’æœTV+WeTV]ï¼‰ 
rule-providers:
  apple-proxy:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Hackl0us/SS-Rule-Snippet@master/Rulesets/Clash/Basic/Apple-proxy.yaml"
    path: ./ruleset/Apple-proxy.yaml
    interval: 3600
  apple-direct:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Hackl0us/SS-Rule-Snippet@master/Rulesets/Clash/Basic/Apple-direct.yaml"
    path: ./ruleset/Apple-direct.yaml
    interval: 3600
  DisneyPlus:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Hackl0us/SS-Rule-Snippet@master/Rulesets/Clash/App/stream/DisneyPlus.yaml"
    path: ./ruleset/DisneyPlus.yaml
    interval: 3600
  Netflix:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Hackl0us/SS-Rule-Snippet@master/Rulesets/Clash/App/stream/Netflix.yaml"
    path: ./ruleset/Netflix.yaml
    interval: 3600	
  cn:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Hackl0us/SS-Rule-Snippet@master/Rulesets/Clash/Basic/CN.yaml"
    path: ./ruleset/CN.yaml
    interval: 3600
  ad-keyword:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Hackl0us/SS-Rule-Snippet@master/Rulesets/Clash/Basic/common-ad-keyword.yaml"
    path: ./ruleset/common-ad-keyword.yaml
    interval: 3600
  foreign:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Hackl0us/SS-Rule-Snippet@master/Rulesets/Clash/Basic/foreign.yaml"
    path: ./ruleset/foreign.yaml
    interval: 3600
  telegram:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Hackl0us/SS-Rule-Snippet@master/Rulesets/Clash/App/social/Telegram.yaml"
    path: ./ruleset/Telegram.yaml
    interval: 3600
  lan:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Hackl0us/SS-Rule-Snippet@master/Rulesets/Clash/Basic/LAN.yaml"
    path: ./ruleset/LAN.yaml
    interval: 3600
############### ruleæ¨¡å¼ [ä»ä¸Šè‡³ä¸‹åŒ¹é…è§„åˆ™ï¼Œè¶Šé å‰ä¼˜å…ˆçº§è¶Šé«˜] ################
################ è‹¥éœ€è¦æ·»åŠ è‡ªå®šä¹‰è§„åˆ™ï¼Œç›´æ¥åœ¨ä¸‹æ–¹ä¿®æ”¹å³å¯ ####################
rules:
# æµ‹é€Ÿç½‘ç«™ | æµ‹IPç½‘ç«™
- DOMAIN-KEYWORD,speedtest,ğŸŒ Speedtest
- DOMAIN-KEYWORD,ooklaserver,ğŸŒ Speedtest
- DOMAIN-SUFFIX,ipinfo.io,ğŸŒ Speedtest
- DOMAIN-SUFFIX,ip.sb,ğŸŒ Speedtest
- DOMAIN-SUFFIX,whoer.net,ğŸŒ Speedtest
- DOMAIN-SUFFIX,speed.cloudflare.com,ğŸŒ Speedtest
- DOMAIN-SUFFIX,fast.com,GlobalTV        # fastæµ‹é€Ÿä¼šèµ°NetflixæœåŠ¡å™¨
############################ rule-set è¿œç¨‹è§„åˆ™ ################################
- RULE-SET,apple-proxy,PROXY
- RULE-SET,apple-direct,DIRECT
- RULE-SET,DisneyPlus,Media-Nodes
- RULE-SET,Netflix,Media-Nodes
- RULE-SET,cn,DIRECT
- RULE-SET,ad-keyword,REJECT
- RULE-SET,foreign,PROXY
- RULE-SET,telegram,PROXY
- RULE-SET,lan,DIRECT
- DOMAIN-SUFFIX,smtp,DIRECT
- DOMAIN-SUFFIX,local,DIRECT
- IP-CIDR,10.0.0.0/8,DIRECT
- IP-CIDR,100.64.0.0/10,DIRECT
- IP-CIDR,127.0.0.0/8,DIRECT
- IP-CIDR,172.16.0.0/12,DIRECT
- IP-CIDR,192.168.0.0/16,DIRECT
- GEOIP,CN,DIRECT              # ä½¿ç”¨geoipæ•°æ®åº“åŒ¹é…å›½å†…IP
- MATCH,Final
